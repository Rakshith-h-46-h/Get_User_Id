<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Get User Id</title>
  <script>
    function sendPhoneNumber() {
      const urlParams = new URLSearchParams(window.location.search);
      const sender = urlParams.get("senderId")?.trim();
      const phoneNumber = urlParams.get("phone_number")?.trim();
      const kycStatus = urlParams.get("kyc_status")?.trim();

      if (sender && phoneNumber && kycStatus) {
        const dataObject = {
          sender: sender,
          phone_number: phoneNumber,
          kyc_status: kycStatus
        };

        const payload = {
          event: "sendPhoneNumber",
          data: JSON.stringify(dataObject)
        };

        top.postMessage(payload, "*");

        console.log("Sent phone number payload:", payload);
        alert("Phone number and KYC status sent successfully!");
      } else {
        alert("Missing senderId, phone_number, or kyc_status in URL");
        console.error("Missing senderId, phone_number, or kyc_status in URL");
      }
    }
  </script>
</head>

<body>
  <button onclick="sendPhoneNumber()">Get User Id</button>
</body>

</html>
